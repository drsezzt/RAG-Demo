# 提示词模板管理

QUERY_REWRITE_TEMPLATE = '''
### 任务：
将法律咨询转化为检索关键词 JSON。

### 约束：
- 仅输出 JSON 字符串。
- 提取 3-5 个核心名词或行为动词。
- 法律名称使用标准全称，包含“中华人民共和国”前缀。

### 输出示例：
Q: 已经在国外申请了专利，国内还能申请吗？
A: {{"search_words": "国外申请 优先权 申请期限", "law_name": "中华人民共和国专利法"}}

Q: 公司收集我的生物识别信息需要我同意吗？
A: {{"search_words": "生物识别 告知同意 个人信息保护", "law_name": "中华人民共和国个人信息保护法"}}

### 执行任务：
Q：{user_input}
A：{{'''

RAG_GENERATE_TEMPLATE = '''你是一位严谨的法律数据分析师。请分析【参考资料】并根据用户咨询输出JSON。

### 任务要求
1. 提取结论：根据法条，判断用户的行为是否合规或应当如何操作。
2. 场景匹配：分析用户处于哪个具体阶段或场景。
3. 风险识别：指出用户容易忽视的法律细节。

### 注意事项：
- 输出必须是合法的JSON格式。
- 不要重复输出【法律原文】的内容。
- 如果原文与问题无关，请在conclusion中说明“未检索到直接相关的法律依据”。

### 输出JSON格式：
{{
   "intent_analysis": "用户目前的情况描述",
   "conclusion": "明确的结论（可以/不可以/应当）",
   "detailed_logic": "基于法条的详细推导过程",
   "risk_tips": ["风险点1", "风险点2"]
}}

### 参考资料
【法律原文】：
{content}

---
【用户咨询】：
{user_input}

【JSON 响应】：'''